image: macOS

environment:
  MACOS_CERTIFICATE:
    secure: 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
  MACOS_CERTIFICATE_PWD:
    secure: auYLm//415HTELcCY+9s6w==

build_script:
- echo $MACOS_CERTIFICATE | base64 --decode > certificate.p12
- psw=`cat /usr/local/var/appveyor/build-agent/psw`
- security create-keychain -p "$psw" build.keychain
- security default-keychain -s build.keychain
- security unlock-keychain -p "$psw" build.keychain
- security import certificate.p12 -k build.keychain -P $MACOS_CERTIFICATE_PWD -T /usr/bin/codesign
- 'security set-key-partition-list -S apple-tool:,apple:,codesign: -s -k "$psw" build.keychain'

test: off
